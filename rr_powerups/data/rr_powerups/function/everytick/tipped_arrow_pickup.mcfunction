##Overhauls default arrow pickup system to give custom named tipped arrows
#Pickup conditions
execute as @a[x=0,team=!Spectator] at @s as @e[type=arrow,scores={arrowtime=10..},nbt={inGround:1b},limit=1,distance=..2,sort=nearest] if items entity @s contents tipped_arrow run tag @s add pickup

#Give appropriate tipped arrow
execute as @a[x=0,team=!Spectator,tag=!fullOffhand] at @s as @e[type=arrow,tag=pickup,tag=!tippedpickup,limit=1,distance=..2,sort=nearest] at @s run function rr_powerups:everytick/tipped_arrow_replace
execute as @e[x=0,type=arrow,tag=pickup,tag=!tippedpickup,tag=!given] if items entity @s contents tipped_arrow[potion_contents={custom_effects:[{id:"minecraft:blindness",amplifier:0b,duration:200,show_particles:1b}]}] at @s run give @p[team=!Spectator,distance=..2,tag=fullOffhand] minecraft:tipped_arrow[custom_name='{"text":"Blindness Arrow","color":"dark_purple","italic":true,"bold":true}',potion_contents={custom_effects:[{id:"minecraft:blindness",amplifier:0b,duration:200,show_particles:1b}],custom_color:3158064},hide_additional_tooltip={}]
execute as @e[x=0,type=arrow,tag=pickup,tag=!tippedpickup,tag=!given] if items entity @s contents tipped_arrow[potion_contents={custom_effects:[{id:"minecraft:levitation",amplifier:0b,duration:100,show_particles:1b}]}] at @s run give @p[team=!Spectator,distance=..2,tag=fullOffhand] minecraft:tipped_arrow[custom_name='{"text":"Levitation Arrow","color":"dark_purple","italic":true,"bold":true}',potion_contents={custom_effects:[{id:"minecraft:levitation",amplifier:0b,duration:100,show_particles:1b}],custom_color:11793919},hide_additional_tooltip={}]
execute as @e[x=0,type=arrow,tag=pickup,tag=!tippedpickup,tag=!given] if items entity @s contents tipped_arrow[potion_contents={custom_effects:[{id:"minecraft:slowness",amplifier:0b,duration:200,show_particles:1b}]}] at @s run give @p[team=!Spectator,distance=..2,tag=fullOffhand] minecraft:tipped_arrow[custom_name='{"text":"Slowness Arrow","color":"dark_purple","italic":true,"bold":true}',potion_contents={custom_effects:[{id:"minecraft:slowness",amplifier:1b,duration:200,show_particles:1b}],custom_color:5596802},hide_additional_tooltip={}]
execute as @e[x=0,type=arrow,tag=pickup,tag=!tippedpickup,tag=!given] if items entity @s contents tipped_arrow[potion_contents={custom_effects:[{id:"minecraft:wither",amplifier:0b,duration:150,show_particles:1b}]}] at @s run give @p[team=!Spectator,distance=..2,tag=fullOffhand] minecraft:tipped_arrow[custom_name='{"text":"Wither Arrow","color":"dark_purple","italic":true,"bold":true}',potion_contents={custom_effects:[{id:"minecraft:wither",amplifier:2b,duration:150,show_particles:1b}],custom_color:4008735},hide_additional_tooltip={}]

#Hotfix because bad tick order
execute as @a[x=0,team=!Spectator] at @s as @e[type=arrow,scores={arrowtime=10..},nbt={inGround:1b},limit=1,distance=..2,sort=nearest] if items entity @s contents tipped_arrow run tag @s add tippedpickup