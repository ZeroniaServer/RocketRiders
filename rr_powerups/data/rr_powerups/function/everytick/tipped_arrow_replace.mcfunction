#Support function for tipped arrow pickup
execute if entity @s[tag=!given] if items entity @s contents tipped_arrow[potion_contents={custom_color:3158064,custom_effects:[{show_icon:1b,duration:200,id:"minecraft:blindness"}]}] run item replace entity @p[team=!Spectator,distance=..2,tag=!fullOffhand] weapon.offhand with minecraft:tipped_arrow[custom_name='{"text":"Blindness Arrow","color":"dark_purple","italic":true,"bold":true}',potion_contents={custom_effects:[{id:"minecraft:blindness",amplifier:0b,duration:200,show_particles:1b}],custom_color:3158064},hide_additional_tooltip={},custom_data={Droppable:1b}] 1
execute if entity @s[tag=!given] if items entity @s contents tipped_arrow[potion_contents={custom_color:11793919,custom_effects:[{show_icon:1b,duration:100,id:"minecraft:levitation"}]}] run item replace entity @p[team=!Spectator,distance=..2,tag=!fullOffhand] weapon.offhand with minecraft:tipped_arrow[custom_name='{"text":"Levitation Arrow","color":"dark_purple","italic":true,"bold":true}',potion_contents={custom_effects:[{id:"minecraft:levitation",amplifier:0b,duration:100,show_particles:1b}],custom_color:11793919},hide_additional_tooltip={},custom_data={Droppable:1b}] 1
execute if entity @s[tag=!given] if items entity @s contents tipped_arrow[potion_contents={custom_color:5596802, custom_effects:[{amplifier:1b,id:"minecraft:slowness",show_icon:1b,duration:200}]}] run item replace entity @p[team=!Spectator,distance=..2,tag=!fullOffhand] weapon.offhand with minecraft:tipped_arrow[custom_name='{"text":"Slowness Arrow","color":"dark_purple","italic":true,"bold":true}',potion_contents={custom_effects:[{id:"minecraft:slowness",amplifier:1b,duration:200,show_particles:1b}],custom_color:5596802},hide_additional_tooltip={},custom_data={Droppable:1b}] 1
execute if entity @s[tag=!given] if items entity @s contents tipped_arrow[potion_contents={custom_color:4008735,custom_effects:[{amplifier:2b,id:"minecraft:wither",show_icon:1b,duration:150}]}] run item replace entity @p[team=!Spectator,distance=..2,tag=!fullOffhand] weapon.offhand with minecraft:tipped_arrow[custom_name='{"text":"Wither Arrow","color":"dark_purple","italic":true,"bold":true}',potion_contents={custom_effects:[{id:"minecraft:wither",amplifier:2b,duration:150,show_particles:1b}],custom_color:4008735},hide_additional_tooltip={},custom_data={Droppable:1b}] 1
execute if entity @s[tag=!given] as @p[team=!Spectator,distance=..2,tag=!fullOffhand] at @s run playsound minecraft:entity.item.pickup player @s ~ ~ ~ 0.25 2
tag @s add given
tag @a[x=0] remove fullOffhand
execute as @a[x=0] if items entity @s weapon.offhand * run tag @s add fullOffhand